<%-include('../../partials/header')%>
<%-include('../../partials/navbar')%>
<div class="container">
  <div class="card">
    <div class="card-body">
      <div class="card-title"><h2>Editar artigo</h2></div>
      <form method="POST" action="/articles/update">
        <input type="hidden" value="<%=article.id%>" name="id">
        <input
          type="text"
          name="title"
          placeholder="Defina o titulo do artigo"
          class="form-control"
          value="<%=article.title%>"
        /> <br>
        <textarea class="form-control" placeholder="Escreva o artigo aqui" name="body" id="article"></textarea><br>
        <label>Categoria</label>
        <select name="category" class="form-control">
            <% categories.forEach((category)=>{%>


              <%if(category.id == article.categoryId){%>
                <option value="<%=category.id%>" selected><%=category.title%></option>
              <%}%>
                <option value="<%=category.id%>"><%=category.title%></option> 
             <%  }) %>
        </select> <br>
        <button class="btn btn-sucess">Atualizar</button>
      </form>
    </div>

  </div>
</div>
<div id="content" style="display: none;">
  <%-article.body%>
</div>
<%-include('../../partials/footer')%>
<script
  src="https://cdn.tiny.cloud/1/<%=tinymceKey%>/tinymce/8/tinymce.min.js"
  referrerpolicy="origin"
  crossorigin="anonymous">
</script>

<script>
  tinymce.init({
    selector: "#article",
    plugins: [
  'advlist',
  'autolink',
  'lists',
  'link',
  'image',
  'charmap',
  'preview',
  'searchreplace',
  'visualblocks',
  'code',
  'fullscreen',
  'insertdatetime',
  'media',
  'table',
  'wordcount',
  'emoticons'
],
init_instance_callback: () => {
  const content = document.getElementById("content").innerHTML;
  tinymce.get("article").setContent(content);
}

  });
</script>
